install:
  - cinst nodejs.install -x86
  - set PATH=%PATH%;"C:\Program Files (x86)\nodejs\"
  - ps: (new-object System.Net.WebClient).Downloadfile("https://downloads.sourceforge.net/project/libusb/libusb-1.0/libusb-1.0.19/libusb-1.0.19.7z", "c:\libusb.7z")
  - 7z x -y "c:\libusb.7z" -o"C:\Program Files\libusb"
  - npm install -g node-gyp
  - npm install -g node-shyp

build_script:
  - git submodule update --init
  - npm install --ignore-scripts
  - node-gyp rebuild
  - node-shyp publish --pack
  - move build\shyp\*.tgz node-usb.tgz
  - appveyor PushArtifact node-usb.tgz

platforms:
  - x32
  - x64
